<?xml version="1.0"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
                xmlns:s="library://ns.adobe.com/flex/spark"
                creationComplete="onCreationComplete(event)"
                autoDrawBackground="false"
                width="100%"
                mouseDown="onMouseEvent(event)"
                mouseUp="onMouseEvent(event)">
    <fx:Script><![CDATA[
        import global.Icons;
        import global.Util;

        import mx.events.FlexEvent;

        import ui.RNMeta;

        public var meta:RNMeta;

        private function onCreationComplete(event:FlexEvent):void
        {
        }

        override public function set data(value:Object):void
        {
            if (!value)
                return;

            meta = value as RNMeta;

            validateView();
        }

        private function validateView():void
        {
            buttonName.label = meta.name;
            labelUrl.text = meta.url;
            labelGameWorlds.text = "Game Worlds: " + meta.gameWorlds.join(", ");
            labelDate.text = "Scheduled for " + Util.toSimpleDateString(meta.startDate) + " - " + Util.toSimpleDateString(meta.endDate);
        }

        private function onMouseEvent(event:MouseEvent):void
        {
            if (event.target != buttonName)
                event.stopImmediatePropagation();
        }
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="normal" />
        <s:State name="selected" />
    </s:states>

    <s:VGroup width="100%"
              bottom="5">
        <s:Panel width="100%" skinClass.selected="skins.PanelSkinSelected">

            <s:VGroup width="100%">
                <s:ToggleButton id="buttonName"
                                skinClass="skins.buttons.ToggleButtonSkinFullWidth"
                                width="100%" />

                <s:Label id="labelUrl"
                         alpha=".6"
                         width="100%" />
                <s:Label id="labelGameWorlds"
                         alpha=".6"
                         width="100%" />
                <s:Label id="labelDate"
                         alpha=".6"
                         width="100%" />
            </s:VGroup>

        </s:Panel>
    </s:VGroup>

</s:ItemRenderer>
